"use strict";function t(t,e,r){return r*(e-t)+t}Object.defineProperty(exports,"__esModule",{value:!0});const e=2*Math.PI,r=.5*Math.PI;function n(t,e,r,n=1,o=1/0,i=0){let a=2/(n||1e-5),u=a*i,l=1/(1+u+.48*u*u+.235*u*u*u),c=t-e,h=e,p=o*n;c=s(c,-p,p);let f=(r+a*c)*i;r=(r-a*f)*l;let d=(e=t-c)+(c+f)*l;return h-t>0==d>h&&(d=h,r=(d-h)/i),{value:d,velocity:r}}function o(t,e,r,n,o){return(t-e)/(r-e)*(o-n)+n}function s(t,e,r){return e>r&&([e,r]=[r,e]),Math.min(Math.max(t,e),r)}function i(t,e,r,n,i){return o(s(t,e,r),e,r,n,i)}function a(t,e){return(t%e+e)%e}function u(t){return!(isNaN(t)||null===t)}var l=Object.freeze({__proto__:null,lerp:t,lerpInv:function(t,e,r){return(r-t)/(e-t)},TAU:e,QUARTER_PI:r,toRadians:function(t){return t*(Math.PI/180)},toDegrees:function(t){return t*(180/Math.PI)},lerpExp:function(t,e,r){return t*Math.pow(e/t,r)},lerpScale:function(t,e,r){return 1/(r*(1/e-1/t)+1/t)},smoothDamp:n,map:o,clamp:s,mapClamped:i,modulo:a,dist:function(t,e,r,n){return Math.hypot(t-r,e-n)},quotient:function(t,e){return~~(t/e)*e},random:function t(e,r){if(1===arguments.length){if(Array.isArray(e)){return e[Math.floor(t(e.length))]}if("object"==typeof e)return t(Object.values(e));if(u(e))return Math.random()*e}else if(0===arguments.length)return Math.random();return Math.random()*(r-e)+e},isNumber:u});class c{constructor(){this.time=this.getTime()}getTime(){return globalThis.window?performance.now():Date.now()}delta(){const t=this.getTime(),e=t-this.time;return this.time=t,e}}var h=Object.freeze({__proto__:null,delay:async function(t){return await new Promise((e=>globalThis.setTimeout(e,t)))},Clock:c});class p{constructor(t){this.settings={value:0,target:0,...t},this.velocity=0,this.value=this.target=this.settings.value}update(){return this.value}setTarget(t=this.target){this.target=t}valueOf(){return this.value}}function f(t,e,r,n,o){return(1-t)*(1-t)*(1-t)*e+3*(1-t)*(1-t)*t*r+3*(1-t)*t*t*n+t*t*t*o}var d=Object.freeze({__proto__:null,Smoother:p,Spring:class extends p{constructor(t){super({drag:.75,strength:.1,...t})}update(t){super.setTarget(t);const{strength:e,drag:r}=this.settings;let n=this.target-this.value;return n*=e,this.velocity*=r,this.velocity+=n,this.value+=this.velocity,this.value}},Lerper:class extends p{constructor(t){super({amount:.05,...t})}update(e){return super.setTarget(e),this.value=t(this.value,this.target,this.settings.amount),this.value}},SmoothDamper:class extends p{constructor(t){super({smoothness:1,maxSpeed:1/0,...t}),this.clock=new c}update(t,e=this.clock.delta()){super.setTarget(t);const{smoothness:r,maxSpeed:o}=this.settings,s=n(this.value,this.target,this.velocity,r,o,e);return this.value=s.value,this.velocity=s.velocity,this.value}},cubicBezier:f,snap:function(t,e,{start:r=0,tolerance:n=0,easing:o=.5}={}){let s=(t+r)/e;return(Math.floor(s)+function(t,e,r){return f(t=i(t,r*=.5,1-r,0,1),e,0,1-e,1)}(a(s,1),o,n))*e-r}});var m=Object.freeze({__proto__:null,remove:function(t,e){const r=t.indexOf(e);return-1!==r&&(t.splice(r,1),!0)},fill:function(t,e){return new Array(t).fill(e)},last:function(t){return t[t.length-1]},range:function(t=0,e,r=1){return void 0===e&&([t,e]=[0,t]),t-=r,{[Symbol.iterator]:()=>({next:()=>({value:t+=r,done:t>=e})})}}});var g=Object.freeze({__proto__:null,screenToWorld:function(t,e,r,{pixelDensity:n=devicePixelRatio}={}){t instanceof CanvasRenderingContext2D&&(t=t.getTransform());const o=t.invertSelf();return r*=n,{x:(e*=n)*o.a+r*o.c+o.e,y:e*o.b+r*o.d+o.f}},skew:function(t,e,r){return t.transform(1,Math.tan(r),Math.tan(e),1,0,0)},crop:function(t,e=0,r=0,n=t.width,o=t.height){const s=document.createElement("canvas"),i=s.getContext("2d"),a=Math.min(e,n),u=Math.min(r,o),l=Math.abs(n-e),c=Math.abs(o-r);return s.width=l,s.height=c,i.drawImage(t,a,u,l,c,0,0,l,c),s},grid:function(t,e,r,n,s,i=1,a=1){let u=e,l=r,c=e+n,h=r+s;t.beginPath();for(let e=0;e<=a;e++){const r=o(e,0,a,l,h);t.moveTo(u,r),t.lineTo(c,r)}for(let e=0;e<=i;e++){const r=o(e,0,i,u,c);t.moveTo(r,l),t.lineTo(r,h)}},rotateFrom:function(t,e,r,n){t.translate(e,r),t.rotate(n),t.translate(-e,-r)},smoothenPath:function(t,{tension:e=.5,quality:r=16}={}){const n=[...t],o=[];n.unshift(t[0]),n.push(t[t.length-1]);for(let t=1;t<n.length-2;t++)for(let s=0;s<=r;s++){const i=n[t],a=n[t+1],u=n[t+2],l=n[t-1],c=(a[0]-l[0])*e,h=(u[0]-i[0])*e,p=(a[1]-l[1])*e,f=(u[1]-i[1])*e,d=s/r,m=2*Math.pow(d,3)-3*Math.pow(d,2)+1,g=-2*Math.pow(d,3)+3*Math.pow(d,2),v=Math.pow(d,3)-2*Math.pow(d,2)+d,_=Math.pow(d,3)-Math.pow(d,2),y=m*i[0]+g*a[0]+v*c+_*h,x=m*i[1]+g*a[1]+v*p+_*f;o.push([y,x])}return o}});var v=Object.freeze({__proto__:null,getIndex:function(t){return[...t.parentElement.children].indexOf(t)},queryAll:function(t,e=document){return e.querySelectorAll(t)},query:function(t,e=document){return e.querySelector(t)}});var _=Object.freeze({__proto__:null,loadJSON:async function(t){return await globalThis.fetch(t).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}))}});var y=Object.freeze({__proto__:null,iterate:function(t,e,r="map"){return Object.fromEntries(Object.entries(t)[r]((([r,n])=>[r,e(n,r,t)]))||{})},deepClone:function(t){return console.warn("deepClone() is deprecated, use structuredClone() instead"),JSON.parse(JSON.stringify(t))},Enum:function*(t,e=[]){let r=0;for(;;){let n;n=0===arguments.length?Symbol():"function"!=typeof t||t.prototype&&t.prototype.constructor===t?t:t.call(this,r),e.push(n),r++,yield n}},monkeyPatcher:function(t,e,{getter:r,setter:n}){const o=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(t,e,{get(){return r(o.get.bind(this))},set(...t){n(o.set.bind(this),...t)}})}});var x=Object.freeze({__proto__:null,capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},isWhiteSpaceOnly:function(t){return 0===t.trim().length},encapsulate:function(t,e,r,n,{caseSensitive:o}={}){const s=new RegExp(`(${r})`,o?"g":"gi");return t.replace(s,`${e}$1${n}`)}});var b=Object.freeze({__proto__:null,Deferred:class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}});function M(t){return t.replace(/^\/+|\/+$/g,"")}var w=Object.freeze({__proto__:null,merge:function(...t){return t.map((t=>M(t))).filter(Boolean).join("/")},sanitize:M});class O extends Map{constructor(){super(...arguments)}renameKey(t,e){this.set(e,this.get(t)).delete(t)}shift(){const{value:t,done:e}=this.entries().next();if(!e)return this.delete(t[0]),t}pop(){const t=[...this.entries()].pop();if(t)return this.delete(t[0]),t}getOrCreate(t,e){let r=this.get(t);return void 0===r&&(this.set(t,e),r=e),r}}exports.MapExtended=O,exports.animation=d,exports.array=m,exports.canvas=g,exports.dom=v,exports.file=_,exports.math=l,exports.object=y,exports.promise=b,exports.string=x,exports.time=h,exports.url=w;
//# sourceMappingURL=utils.cjs.js.map
