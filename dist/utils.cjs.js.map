{"version":3,"file":"utils.cjs.js","sources":["../src/math.js","../src/time.js","../src/animation.js","../src/array.js","../src/canvas.js","../src/dom.js","../src/file.js","../src/object.js","../src/string.js","../src/promise.js","../src/url.js","../src/MapExtended.js"],"sourcesContent":["/**\n * Linear interpolation, maps the amount between 0 and 1 to a range between start and stop\n * @param  {number} start\n * @param  {number} stop\n * @param  {number} amount\n * @returns  {number} Returns the mapped value\n */\nexport function lerp(start, stop, amount) {\n  return amount * (stop - start) + start\n}\n\n/**\n * Inverse of the lerp() function\n * @param  {number} start\n * @param  {number} stop\n * @param  {number} amount\n * @returns  {number} Returns the value mapped between 0 and 1\n */\nexport function lerpInv(start, stop, amount) {\n  return (amount - start) / (stop - start)\n}\n\n// angles\nexport const TAU = 2 * Math.PI\nexport const QUARTER_PI = Math.PI * 0.5\n\nexport function toRadians(degrees) {\n  return degrees * (Math.PI / 180)\n}\n\nexport function toDegrees(radians) {\n  return radians * (180 / Math.PI)\n}\n\n/**\n * Exponential Lerp, distance between 0.125 and 0.25 is now exactly the same as the distance between 4 and 8\n * @param {number} a start\n * @param {number} b end\n * @param {number} t amount\n * @author freyaholmer\n * @author khyperia\n * @returns {number}\n */\nexport function lerpExp(a, b, t) {\n  return a * Math.pow(b / a, t)\n}\n\n/**\n * Lerp for Scale/Zooming {@link https://gamedev.stackexchange.com/questions/4093/zooming-and-panning-a-camera-simultaneously-causes-a-swooping-effect more}.\n * @param {number} a start\n * @param {number} b end\n * @param {number} t amount\n * @returns {number}\n */\nexport function lerpScale(a, b, t) {\n  return 1 / (t * (1 / b - 1 / a) + 1 / a)\n}\n\nexport function smoothDamp(\n  current,\n  target,\n  velocity,\n  smoothness = 1,\n  maxSpeed = Infinity,\n  deltaTime = 0\n) {\n  let num = 2 / (smoothness || 0.00001)\n  let num2 = num * deltaTime\n  let num3 = 1 / (1 + num2 + 0.48 * num2 * num2 + 0.235 * num2 * num2 * num2)\n  let num4 = current - target\n  let num5 = target\n  let num6 = maxSpeed * smoothness\n  num4 = clamp(num4, -num6, num6)\n  target = current - num4\n  let num7 = (velocity + num * num4) * deltaTime\n  velocity = (velocity - num * num7) * num3\n  let value = target + (num4 + num7) * num3\n  if (num5 - current > 0 === value > num5) {\n    value = num5\n    velocity = (value - num5) / deltaTime\n  }\n  return { value, velocity }\n}\n\nexport function map(num, start1, stop1, start2, stop2) {\n  return ((num - start1) / (stop1 - start1)) * (stop2 - start2) + start2\n}\n\nexport function clamp(num, min, max) {\n  if (min > max) [min, max] = [max, min]\n  return Math.min(Math.max(num, min), max)\n}\n\nexport function mapClamped(num, start1, stop1, start2, stop2) {\n  return map(clamp(num, start1, stop1), start1, stop1, start2, stop2)\n}\n\n//modulo operator, same as js remainder. but works with negative numbers.\nexport function modulo(num, mod) {\n  return ((num % mod) + mod) % mod\n}\n\nexport function dist(x1, y1, x2, y2) {\n  return Math.hypot(x1 - x2, y1 - y2)\n}\n\nexport function quotient(n, m) {\n  return ~~(n / m) * m\n}\n\nexport function random(a, b) {\n  if (arguments.length === 1) {\n    if (Array.isArray(a)) {\n      const index = Math.floor(random(a.length))\n\n      return a[index]\n    } else if (typeof a === 'object') {\n      return random(Object.values(a))\n    } else if (isNumber(a)) {\n      return Math.random() * a\n    }\n  } else if (arguments.length === 0) {\n    return Math.random()\n  }\n\n  return Math.random() * (b - a) + a\n}\n\nexport function isNumber(elem) {\n  return !(isNaN(elem) || elem === null)\n}\n","export async function delay(millis) {\n  return await new Promise((resolve) => globalThis.setTimeout(resolve, millis))\n}\nexport class Clock {\n  constructor() {\n    this.time = this.getTime()\n  }\n  getTime() {\n    return globalThis.window ? performance.now() : Date.now()\n  }\n  delta() {\n    const timeNow = this.getTime()\n    const deltaTime = timeNow - this.time\n    this.time = timeNow\n    return deltaTime\n  }\n}\n","import { lerp, smoothDamp, mapClamped, modulo } from './math'\nimport { Clock } from './time'\n\nexport class Smoother {\n  constructor(options) {\n    this.settings = {\n      value: 0,\n      target: 0,\n      ...options,\n    }\n\n    this.velocity = 0\n    this.value = this.target = this.settings.value\n  }\n  update() {\n    return this.value\n  }\n  setTarget(target = this.target) {\n    this.target = target\n  }\n  valueOf() {\n    return this.value\n  }\n}\n\nexport class Spring extends Smoother {\n  constructor(options) {\n    super({\n      drag: 0.75,\n      strength: 0.1,\n      ...options,\n    })\n  }\n\n  update(target) {\n    super.setTarget(target)\n    const { strength, drag } = this.settings\n\n    let force = this.target - this.value\n    force *= strength\n\n    this.velocity *= drag\n    this.velocity += force\n\n    this.value += this.velocity\n\n    return this.value\n  }\n}\n\nexport class Lerper extends Smoother {\n  constructor(options) {\n    super({\n      amount: 0.05,\n      ...options,\n    })\n  }\n\n  update(target) {\n    super.setTarget(target)\n    this.value = lerp(this.value, this.target, this.settings.amount)\n    return this.value\n  }\n}\n\nexport class SmoothDamper extends Smoother {\n  constructor(options) {\n    super({\n      smoothness: 1,\n      maxSpeed: Infinity,\n      ...options,\n    })\n    this.clock = new Clock()\n  }\n\n  update(target, deltaTime = this.clock.delta()) {\n    super.setTarget(target)\n    const { smoothness, maxSpeed } = this.settings\n    const results = smoothDamp(\n      this.value,\n      this.target,\n      this.velocity,\n      smoothness,\n      maxSpeed,\n      deltaTime\n    )\n    this.value = results.value\n    this.velocity = results.velocity\n    return this.value\n  }\n}\n\n// https://morethandev.hashnode.dev/demystifying-the-cubic-bezier-function-ft-javascript\nexport function cubicBezier(t, initial, p1, p2, final) {\n  return (\n    (1 - t) * (1 - t) * (1 - t) * initial +\n    3 * (1 - t) * (1 - t) * t * p1 +\n    3 * (1 - t) * t * t * p2 +\n    t * t * t * final\n  )\n}\n\nfunction ease(t, easing, tolerance) {\n  tolerance *= 0.5\n  t = mapClamped(t, tolerance, 1 - tolerance, 0, 1)\n  // return (1 - (Math.cos(t * PI) * 0.5 + 0.5))\n  return cubicBezier(t, easing, 0, 1 - easing, 1)\n}\n\nexport function snap(\n  value,\n  dist,\n  { start = 0, tolerance = 0, easing = 0.5 } = {}\n) {\n  let t = (value + start) / dist\n  return (Math.floor(t) + ease(modulo(t, 1), easing, tolerance)) * dist - start\n}\n","export function remove(arr, elem) {\n  const index = arr.indexOf(elem)\n  if (index === -1) return false\n  arr.splice(index, 1)\n  return true\n}\n\nexport function fill(amount, entry) {\n  return new Array(amount).fill(entry)\n}\n\nexport function last(arr) {\n  return arr[arr.length - 1]\n}\n\nexport function range(start = 0, stop, step = 1) {\n  if (stop === undefined) [start, stop] = [0, start]\n\n  start -= step\n  return {\n    [Symbol.iterator]: () => ({\n      next: () => ({\n        value: (start += step),\n        done: start >= stop,\n      }),\n    }),\n  }\n}\n","import { map } from './math.js'\n\nexport function screenToWorld(\n  ctxOrMatrix,\n  x,\n  y,\n  { pixelDensity = devicePixelRatio } = {}\n) {\n  if (ctxOrMatrix instanceof CanvasRenderingContext2D)\n    ctxOrMatrix = ctxOrMatrix.getTransform()\n\n  const imatrix = ctxOrMatrix.invertSelf()\n\n  x *= pixelDensity\n  y *= pixelDensity\n\n  return {\n    x: x * imatrix.a + y * imatrix.c + imatrix.e,\n    y: x * imatrix.b + y * imatrix.d + imatrix.f,\n  }\n}\n\nexport function skew(ctx, x, y) {\n  return ctx.transform(1, Math.tan(y), Math.tan(x), 1, 0, 0)\n}\n\nexport function crop(\n  source,\n  x1 = 0,\n  y1 = 0,\n  x2 = source.width,\n  y2 = source.height\n) {\n  const canvas = document.createElement('canvas')\n  const ctx = canvas.getContext('2d')\n  const x = Math.min(x1, x2)\n  const y = Math.min(y1, y2)\n  const width = Math.abs(x2 - x1)\n  const height = Math.abs(y2 - y1)\n\n  canvas.width = width\n  canvas.height = height\n\n  ctx.drawImage(source, x, y, width, height, 0, 0, width, height)\n\n  return canvas\n}\n\nexport function grid(ctx, x, y, w, h, columns = 1, rows = 1) {\n  let x1 = x,\n    y1 = y,\n    x2 = x + w,\n    y2 = y + h\n\n  ctx.beginPath()\n\n  for (let row = 0; row <= rows; row++) {\n    const y = map(row, 0, rows, y1, y2)\n    ctx.moveTo(x1, y)\n    ctx.lineTo(x2, y)\n  }\n\n  for (let column = 0; column <= columns; column++) {\n    const x = map(column, 0, columns, x1, x2)\n    ctx.moveTo(x, y1)\n    ctx.lineTo(x, y2)\n  }\n}\n\nexport function rotateFrom(ctx, x, y, angle) {\n  ctx.translate(x, y)\n  ctx.rotate(angle)\n  ctx.translate(-x, -y)\n}\n\n// https://stackoverflow.com/questions/7054272/how-to-draw-smooth-curve-through-n-points-using-javascript-html5-canvas\n// origPoints = [[x, y], [x, y], [x, y], ...]\nexport function smoothenPath(origPoints, { tension = 0.5, quality = 16 } = {}) {\n  const points = [...origPoints]\n  const res = [] // clone array\n  points.unshift(origPoints[0])\n  points.push(origPoints[origPoints.length - 1])\n\n  for (let i = 1; i < points.length - 2; i++) {\n    for (let t = 0; t <= quality; t++) {\n      const curr = points[i]\n      const next1 = points[i + 1]\n      const next2 = points[i + 2]\n      const prev1 = points[i - 1]\n      const t1x = (next1[0] - prev1[0]) * tension\n      const t2x = (next2[0] - curr[0]) * tension\n\n      const t1y = (next1[1] - prev1[1]) * tension\n      const t2y = (next2[1] - curr[1]) * tension\n\n      // calc step\n      const st = t / quality\n\n      // calc cardinals\n      const c1 = 2 * Math.pow(st, 3) - 3 * Math.pow(st, 2) + 1\n      const c2 = -(2 * Math.pow(st, 3)) + 3 * Math.pow(st, 2)\n      const c3 = Math.pow(st, 3) - 2 * Math.pow(st, 2) + st\n      const c4 = Math.pow(st, 3) - Math.pow(st, 2)\n\n      const x = c1 * curr[0] + c2 * next1[0] + c3 * t1x + c4 * t2x\n      const y = c1 * curr[1] + c2 * next1[1] + c3 * t1y + c4 * t2y\n\n      //store points in array\n      res.push([x, y])\n    }\n  }\n\n  return res\n}\n","export function getIndex(domElement) {\n  return [...domElement.parentElement.children].indexOf(domElement)\n}\n\nexport function queryAll(selector, parent = document) {\n  return parent.querySelectorAll(selector)\n}\n\nexport function query(selector, parent = document) {\n  return parent.querySelector(selector)\n}\n","export async function loadJSON(url) {\n  return await globalThis.fetch(url).then((response) => {\n    if (!response.ok) throw new Error(response.statusText)\n    return response.json()\n  })\n}\n","export function iterate(obj, callback, method = 'map') {\n  const func = ([key, value]) => [key, callback(value, key, obj)]\n  return Object.fromEntries(Object.entries(obj)[method](func) || {})\n}\n\nexport function deepClone(obj) {\n  console.warn('deepClone() is deprecated, use structuredClone() instead')\n  return JSON.parse(JSON.stringify(obj))\n}\n\nexport function* Enum(a, b = []) {\n  let i = 0\n  while (true) {\n    let v\n    if (arguments.length === 0) v = Symbol()\n    else if (\n      typeof a === 'function' &&\n      !(a.prototype && a.prototype.constructor === a)\n    ) {\n      v = a.call(this, i)\n    } else {\n      v = a\n    }\n    b.push(v)\n    i++\n    yield v\n  }\n}\n\nexport function monkeyPatcher(element, property, { getter, setter }) {\n  const original = Object.getOwnPropertyDescriptor(element, property)\n  Object.defineProperty(element, property, {\n    get() {\n      return getter(original.get.bind(this))\n    },\n    set(...values) {\n      setter(original.set.bind(this), ...values)\n    },\n  })\n}\n","export function capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1)\n}\n\nexport function isWhiteSpaceOnly(str) {\n  return str.trim().length === 0\n}\n\nexport function encapsulate(\n  string,\n  prefix,\n  substring,\n  suffix,\n  { caseSensitive } = {}\n) {\n  const modifier = caseSensitive ? 'g' : 'gi'\n  const regExp = new RegExp(`(${substring})`, modifier)\n  return string.replace(regExp, `${prefix}$1${suffix}`)\n}\n","export class Deferred {\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve\n      this.reject = reject\n    })\n  }\n}\n","export function merge(...paths) {\n  return paths\n    .map((path) => sanitize(path))\n    .filter(Boolean)\n    .join('/')\n}\n\nexport function sanitize(path) {\n  return path.replace(/^\\/+|\\/+$/g, '')\n}\n","const NO_VALUE = undefined\n\n/**\n * Class adding functionalities to MapExtended.\n * @extends Map\n **/\n\nexport default class MapExtended extends Map {\n  /**\n   * Create a Map Extender.\n   * @param {number} x - The x value.\n   */\n  constructor() {\n    super(...arguments)\n  }\n\n  /**\n   * Rename a specific key.\n   * @param {*} oldKey - The old key.\n   * @param {*} newKey - The new key.\n   */\n  renameKey(oldKey, newKey) {\n    this.set(newKey, this.get(oldKey)).delete(oldKey)\n  }\n\n  /**\n   * Removes the first element and returns that removed element.\n   * @return {*} The removed element.\n   */\n  shift() {\n    const { value, done } = this.entries().next()\n    if (done) return NO_VALUE\n    this.delete(value[0])\n    return value\n  }\n\n  /**\n   * Removes the last element and returns that removed element.\n   * @return {*} The removed element.\n   */\n  pop() {\n    const value = [...this.entries()].pop()\n    if (!value) return NO_VALUE\n    this.delete(value[0])\n    return value\n  }\n\n  getOrCreate(key, value) {\n    let result = this.get(key)\n    if (result === undefined) {\n      this.set(key, value)\n      result = value\n    }\n    return result\n  }\n}\n"],"names":["lerp","start","stop","amount","TAU","Math","PI","QUARTER_PI","smoothDamp","current","target","velocity","smoothness","maxSpeed","Infinity","deltaTime","num","num2","num3","num4","num5","num6","clamp","num7","value","map","start1","stop1","start2","stop2","min","max","mapClamped","modulo","mod","isNumber","elem","isNaN","degrees","radians","a","b","t","pow","x1","y1","x2","y2","hypot","n","m","random","arguments","length","Array","isArray","floor","Object","values","Clock","constructor","this","time","getTime","globalThis","window","performance","now","Date","delta","timeNow","async","millis","Promise","resolve","setTimeout","Smoother","options","settings","update","setTarget","valueOf","cubicBezier","initial","p1","p2","final","super","drag","strength","force","clock","results","dist","tolerance","easing","ease","arr","index","indexOf","splice","entry","fill","step","undefined","Symbol","iterator","next","done","ctxOrMatrix","x","y","pixelDensity","devicePixelRatio","CanvasRenderingContext2D","getTransform","imatrix","invertSelf","c","e","d","f","ctx","transform","tan","source","width","height","canvas","document","createElement","getContext","abs","drawImage","w","h","columns","rows","beginPath","row","moveTo","lineTo","column","angle","translate","rotate","origPoints","tension","quality","points","res","unshift","push","i","curr","next1","next2","prev1","t1x","t2x","t1y","t2y","st","c1","c2","c3","c4","domElement","parentElement","children","selector","parent","querySelectorAll","querySelector","url","fetch","then","response","ok","Error","statusText","json","obj","callback","method","fromEntries","entries","key","console","warn","JSON","parse","stringify","v","prototype","call","element","property","getter","setter","original","getOwnPropertyDescriptor","defineProperty","get","bind","set","string","charAt","toUpperCase","slice","str","trim","prefix","substring","suffix","caseSensitive","regExp","RegExp","replace","promise","reject","sanitize","path","paths","filter","Boolean","join","MapExtended","Map","renameKey","oldKey","newKey","delete","shift","pop","getOrCreate","result"],"mappings":"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"}