!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).MatosebUtils={})}(this,(function(t){"use strict";function e(t,e,n){return n*(e-t)+t}const n=2*Math.PI,r=.5*Math.PI;function o(t,e,n,r=1,o=1/0,i=0){let a=2/(r||1e-5),u=a*i,l=1/(1+u+.48*u*u+.235*u*u*u),c=t-e,h=e,f=o*r;c=s(c,-f,f);let p=(n+a*c)*i;n=(n-a*p)*l;let d=(e=t-c)+(c+p)*l;return h-t>0==d>h&&(d=h,n=(d-h)/i),{value:d,velocity:n}}function i(t,e,n,r,o){return(t-e)/(n-e)*(o-r)+r}function s(t,e,n){return e>n&&([e,n]=[n,e]),Math.min(Math.max(t,e),n)}function a(t){return!(isNaN(t)||null===t)}var u=Object.freeze({__proto__:null,lerp:e,lerpInv:function(t,e,n){return(n-t)/(e-t)},TAU:n,QUARTER_PI:r,toRadians:function(t){return t*(Math.PI/180)},toDegrees:function(t){return t*(180/Math.PI)},lerpExp:function(t,e,n){return t*Math.pow(e/t,n)},lerpScale:function(t,e,n){return 1/(n*(1/e-1/t)+1/t)},smoothDamp:o,map:i,clamp:s,mapClamped:function(t,e,n,r,o){return i(s(t,e,n),e,n,r,o)},modulo:function(t,e){return(t%e+e)%e},dist:function(t,e,n,r){return Math.hypot(t-n,e-r)},quotient:function(t,e){return~~(t/e)*e},random:function t(e,n){if(1===arguments.length){if(Array.isArray(e)){return e[Math.floor(t(e.length))]}if("object"==typeof e)return t(Object.values(e));if(a(e))return Math.random()*e}else if(0===arguments.length)return Math.random();return Math.random()*(n-e)+e},isNumber:a});class l{constructor(){this.time=this.getTime()}getTime(){return globalThis.window?performance.now():Date.now()}delta(){const t=this.getTime(),e=t-this.time;return this.time=t,e}}var c=Object.freeze({__proto__:null,delay:async function(t){return await new Promise((e=>globalThis.setTimeout(e,t)))},Clock:l});class h{constructor(t){this.settings={value:0,target:0,...t},this.velocity=0,this.value=this.target=this.settings.value}update(){return this.value}setTarget(t=this.target){this.target=t}valueOf(){return this.value}}var f=Object.freeze({__proto__:null,Spring:class extends h{constructor(t){super({drag:.75,strength:.1,...t})}update(t){super.setTarget(t);const{strength:e,drag:n}=this.settings;let r=this.target-this.value;return r*=e,this.velocity*=n,this.velocity+=r,this.value+=this.velocity,this.value}},Lerper:class extends h{constructor(t){super({amount:.05,...t})}update(t){return super.setTarget(t),this.value=e(this.value,this.target,this.settings.amount),this.value}},SmoothDamper:class extends h{constructor(t){super({smoothness:1,maxSpeed:1/0,...t}),this.clock=new l}update(t=this.clock.tick(),e){super.setTarget(e);const{smoothness:n,maxSpeed:r}=this.settings,i=o(this.value,this.target,this.velocity,n,r,t);return this.value=i.value,this.velocity=i.velocity,this.value}}});var p=Object.freeze({__proto__:null,remove:function(t,e){const n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)},fill:function(t,e){return new Array(t).fill(e)},last:function(t){return t[t.length-1]},range:function(t=0,e,n=1){return void 0===e&&([t,e]=[0,t]),t-=n,{[Symbol.iterator]:()=>({next:()=>({value:t+=n,done:t>=e})})}}});var d=Object.freeze({__proto__:null,screenToWorld:function(t,e,n){const r=((n={pixelDensity:window.devicePixelRatio,ctx:void 0,matrix:void 0,...n}).matrix||n.ctx.getTransform()).invertSelf();return t*=n.pixelDensity,e*=n.pixelDensity,{x:t*r.a+e*r.c+r.e,y:t*r.b+e*r.d+r.f}},skew:function(t,e,{ctx:n}){return n.transform(1,Math.tan(e),Math.tan(t),1,0,0)},toCanvas:function(t,e=0,n=0,r=t.width,o=t.height){const i=document.createElement("canvas"),s=i.getContext("2d"),a=Math.abs(r-e),u=Math.abs(o-n);return i.width=a,i.height=u,s.drawImage(t,e,n,a,u,0,0,a,u),i},smoothenPath:function(t,{tension:e=.5,quality:n=16}={}){const r=[...t],o=[];r.unshift(t[0]),r.push(t[t.length-1]);for(let t=1;t<r.length-2;t++)for(let i=0;i<=n;i++){const s=r[t],a=r[t+1],u=r[t+2],l=r[t-1],c=(a[0]-l[0])*e,h=(u[0]-s[0])*e,f=(a[1]-l[1])*e,p=(u[1]-s[1])*e,d=i/n,m=2*Math.pow(d,3)-3*Math.pow(d,2)+1,g=-2*Math.pow(d,3)+3*Math.pow(d,2),v=Math.pow(d,3)-2*Math.pow(d,2)+d,y=Math.pow(d,3)-Math.pow(d,2),_=m*s[0]+g*a[0]+v*c+y*h,x=m*s[1]+g*a[1]+v*f+y*p;o.push([_,x])}return o}});var m=Object.freeze({__proto__:null,getIndex:function(t){return[...t.parentElement.children].indexOf(t)},queryAll:function(t,e=document){return e.querySelectorAll(t)},query:function(t,e=document){return e.querySelector(t)}});var g=Object.freeze({__proto__:null,loadJSON:async function(t){return await globalThis.fetch(t).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}))}});var v=Object.freeze({__proto__:null,iterate:function(t,e,n="map"){return Object.fromEntries(Object.entries(t)[n]((([n,r])=>[n,e(r,n,t)]))||{})},deepClone:function(t){return console.warn("deepClone() is deprecated, use structuredClone() instead"),JSON.parse(JSON.stringify(t))},Enum:function*(t,e=[]){let n=0;for(;;){let r;r=0===arguments.length?Symbol():"function"!=typeof t||t.prototype&&t.prototype.constructor===t?t:t.call(this,n),e.push(r),n++,yield r}}});var y=Object.freeze({__proto__:null,capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},isWhiteSpaceOnly:function(t){return 0===t.trim().length}});const _=void 0;class x extends Map{constructor(){super(...arguments)}renameKey(t,e){this.set(e,this.get(t)).delete(t)}shift(){const{value:t,done:e}=this.entries().next();return e?_:(this.delete(t[0]),t)}pop(){const t=[...this.entries()].pop();return t?(this.delete(t[0]),t):_}getOrCreate(t,e){let n=this.get(t);return void 0===n&&(this.set(t,e),n=e),n}}t.MapExtended=x,t.animation=f,t.array=p,t.canvas=d,t.dom=m,t.file=g,t.math=u,t.object=v,t.string=y,t.time=c,Object.defineProperty(t,"__esModule",{value:!0})}));
